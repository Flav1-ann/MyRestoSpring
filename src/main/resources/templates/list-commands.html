<!DOCTYPE html>
<html lang="fr" xmlns:th="http://thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/layout.html}">
<head>
    <title>MyResto - Liste des commandes</title>
    <meta name="description" content="La liste des commandes. Pour valider ou pour tracker.">
</head>
<link th:href="@{/assets/styles.css}" rel="stylesheet"/>
<link th:href="@{/assets/script.js}" rel="javascript"/>
<script type="text/javascript" th:src="@{/assets/script_shoppingcard.js}"></script>

<body>

    <main layout:fragment="content">
            <div class="main_container--commands main_container--form">
                <div class="_row">
                    <h1 class="_col-12">Liste des commandes</h1>
        
                    <th:block th:each="command : ${allcommands}">
                        <div class="card-command _col-4 _col-md-6 _col-sm-12">
                            <div class="card-command_title">
                                <h2 th:text=" Commande + ${command.id}"></h2>
                            </div>
                            <div class="card-command_customer">
                                <!-- Seul le gérant voit cette partie -->
                                <span th:text="${command.user.username} + ' ' + ${command.user.lastName}">Jean-Claude</span>
                                <span th:text="${command.user.email}">0634951837</span>
                            </div>
                            <div class="card-command_command">
                                <th:block th:each="pro : ${command.products}">
                                    <div><span th:text="${pro.name}">Frites x1</span>
                                        <span th:text="${pro.price}+€">1€</span></div>
                                </th:block>
        
                                <div><span>Total</span><span th:text="${command.price}+€">29€</span></div>
                            </div>
                            <div class="card-command_status">
                                <span th:text="${command.sate}">En cours</span>
        
                                <div th:if="${command.sate  == T(eu.ensup.MyResto.model.States).CREATED}"> <a   th:href="@{'/deleteOrder/' + ${command.id}}"> <button class="button-round"><i class="fas fa-cart-arrow-down"></i> Annuler la commande</button></a></div>
                                <div th:if="${command.sate  == T(eu.ensup.MyResto.model.States).CREATED}"> <a th:href="@{'/liveredOrder/' + ${command.id}}"> <button class="button-round"><i class="fas fa-cart-arrow-down"></i> Commande  livrée</button></a></div>
                            </div>
                        </div>
                    </th:block>
                </div>
            </div>
        </main>

</body>
</html>

